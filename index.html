<!DOCTYPE html>
<html lang="es">
<head>
  <link rel="manifest" href="manifest.json">
  <meta charset="UTF-8">
  <!-- Evita el zoom en móviles -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Programa de Reuniones - Testigos de Jehová</title>
  <!-- Iconos, estilos y jsPDF -->
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <div class="container">
    <!-- Bloque: Título de la reunión -->
    <h1>Programa de Reuniones San Adrian</h1>

    <!-- Bloque: Presidente -->
    <div class="president-section">
      <label for="president-name">Presidente de la reunión:</label>
      <input type="text" id="president-name" placeholder="Nombre del presidente">
    </div>

    <!-- Bloque: Controles principales -->
    <div class="meeting-controls">
      <button id="meeting-start-button" class="main-control-btn">
        <i class="fas fa-play-circle"></i> Iniciar Reunión Completa
      </button>
      <div id="floating-clock">
        <i class="fas fa-clock"></i> <span id="global-timer">00:00</span>
      </div>
    </div>

    <!-- Bloque 0a: Introducción – Canción y oración (5 min = 300 seg) -->
    <section id="block-0a">
      <h2>Canción y oración (5 min)</h2>
      <div class="section" data-block-index="0a" data-section-index="0" data-allocated="300">
        <div class="section-header">
          <input type="text" class="section-title" placeholder="Canción y Oración">
          <label>Tiempo (seg):</label>
          <input type="number" class="allocated-input" value="300">
          <label>Inicio:</label>
          <input type="text" class="start-time" readonly>
          <label>Fin:</label>
          <input type="text" class="end-time" readonly>
        </div>
        <div class="timer-display" id="timer-block-0a-0">
          00:00 (<span class="time-diff">00:00</span>)
        </div>
        <div class="section-controls">
          <button class="start-btn">Iniciar</button>
          <button class="pause-btn">Pausar</button>
          <button class="reset-btn">Finalizar</button>
        </div>
      </div>
    </section>

    <!-- Bloque 0b: Introducción – Palabras de introducción (1 min) -->
    <section id="block-0b">
      <h2>Palabras de introducción (1 min)</h2>
      <div class="section" data-block-index="0b" data-section-index="0" data-allocated="60">
        <div class="section-header">
          <input type="text" class="section-title" placeholder="Palabras de introducción">
          <label>Tiempo (seg):</label>
          <input type="number" class="allocated-input" value="60">
          <label>Inicio:</label>
          <input type="text" class="start-time" readonly>
          <label>Fin:</label>
          <input type="text" class="end-time" readonly>
        </div>
        <div class="timer-display" id="timer-block-0b-0">
          00:00 (<span class="time-diff">00:00</span>)
        </div>
        <div class="section-controls">
          <button class="start-btn">Iniciar</button>
          <button class="pause-btn">Pausar</button>
          <button class="reset-btn">Finalizar</button>
        </div>
      </div>
    </section>

    <!-- Bloque 1: Tesoros de la Biblia (10 min) -->
    <section id="block-1">
      <h2>Tesoros de la Biblia (10 min)</h2>
      
      <!-- Sección 1: Orador (tiempo fijo: 600 seg) -->
      <div class="section" data-block-index="1" data-section-index="0" data-allocated="600">
        <div class="section-header">
          <input type="text" class="section-title" placeholder="Título del discurso">
          <span class="allocated-fixed">600 seg</span>
          <label>Dirige la asignación:</label>
          <input type="text" class="responsible-input" placeholder="Nombre">
          <label>Inicio:</label>
          <input type="text" class="start-time" readonly>
          <label>Fin:</label>
          <input type="text" class="end-time" readonly>
        </div>
        <div class="timer-display" id="timer-block-1-0">
          00:00 (<span class="time-diff">00:00</span>)
        </div>
        <div class="section-controls">
          <button class="start-btn">Iniciar</button>
          <button class="pause-btn">Pausar</button>
          <button class="reset-btn">Finalizar</button>
        </div>
      </div>
      
      <!-- Sección 2: Perlas escondidas con comentarios (tiempo fijo: 600 seg) -->
      <h2>Perlas escondidas (10 min)</h2>
      <div class="section with-comments" data-block-index="1" data-section-index="1" data-allocated="600">
        <div class="section-header">
          <input type="text" class="section-title" placeholder="Libro y capítulos a analizar:">
          <span class="allocated-fixed">600 seg</span>
          <label>Responsable:</label>
          <input type="text" class="responsible-input" placeholder="Nombre">
          <label>Inicio:</label>
          <input type="text" class="start-time" readonly>
          <label>Fin:</label>
          <input type="text" class="end-time" readonly>
        </div>
        <div class="timer-display" id="timer-block-1-1">
          00:00 (<span class="time-diff">00:00</span>)
        </div>
        <div class="section-controls">
          <button class="start-btn">Iniciar</button>
          <button class="pause-btn">Pausar</button>
          <button class="reset-btn">Finalizar</button>
        </div>
        <!-- Contenedor de Comentarios -->
        <div class="comment-container">
          <h4>Comentarios del Auditorio (30 seg cada uno)</h4>
          <div class="comment-input">
            <label>Nombre:</label>
            <!-- Corregido: se usa "comment-name" sin el punto -->
            <input type="text" class="comment-name" placeholder="Nombre del comentador">
          </div>
          <div class="timer-display comment-timer">00:00</div>
          <div class="comment-controls">
            <button class="comment-start">Iniciar Comentario</button>
            <button class="comment-end">Finalizar Comentario</button>
            <button class="next-comment">Siguiente Comentario</button>
          </div>
          <p>Comentarios registrados: <span class="comment-count">0</span></p>
          <ul class="comment-list"></ul>
        </div>
      </div>
      
      <!-- Sección 3: Lectura de la Biblia (4 min) -->
      <h2>Lectura de la Biblia (4 min)</h2>
      <div class="section" data-block-index="1" data-section-index="2" data-allocated="240">
        <div class="section-header">
          <input type="text" class="section-title" placeholder="Libro:" >
          <span class="allocated-fixed">240 seg</span>
          <label>Lector:</label>
          <input type="text" class="responsible-input" placeholder="Nombre">
          <label>Inicio:</label>
          <input type="text" class="start-time" readonly>
          <label>Fin:</label>
          <input type="text" class="end-time" readonly>
        </div>
        <div class="timer-display" id="timer-block-1-2">
          00:00 (<span class="time-diff">00:00</span>)
        </div>
        <div class="section-controls">
          <button class="start-btn">Iniciar</button>
          <button class="pause-btn">Pausar</button>
          <button class="reset-btn">Finalizar</button>
        </div>
      </div>
      
      <!-- Sección 4: Consejo (90 seg fijos, sin input) -->
      <div class="section consejo" data-block-index="1" data-section-index="3" data-allocated="90">
        <div class="section-header">
          <label class="section-title" style="font-weight:bold;">Consejo (90 seg):</label>
          <label>Inicio:</label>
          <input type="text" class="start-time" readonly>
          <label>Fin:</label>
          <input type="text" class="end-time" readonly>
        </div>
        <div class="timer-display" id="timer-block-1-3">
          00:00 (<span class="time-diff">00:00</span>)
        </div>
        <div class="section-controls">
          <button class="start-btn">Iniciar</button>
          <button class="pause-btn">Pausar</button>
          <button class="reset-btn">Finalizar</button>
        </div>
      </div>
    </section>

    <!-- Bloque 2: Seamos mejores maestros (15 min) -->
    <section id="block-2">
      <h2>Seamos mejores maestros</h2>
      
      <!-- Participación 1 -->
      <div class="section" data-block-index="2" data-section-index="0" data-allocated="240">
        <div class="section-header">
          <input type="text" class="section-title" placeholder="Asignación 1">
          <label>Tiempo (seg):</label>
          <input type="number" class="allocated-input" value="240">
          <label>Responsable:</label>
          <input type="text" class="responsible-input" placeholder="¿Estudiantes?">
          <label>Inicio:</label>
          <input type="text" class="start-time" readonly>
          <label>Fin:</label>
          <input type="text" class="end-time" readonly>
        </div>
        <div class="timer-display" id="timer-block-2-0">
          00:00 (<span class="time-diff">00:00</span>)
        </div>
        <div class="section-controls">
          <button class="start-btn">Iniciar</button>
          <button class="pause-btn">Pausar</button>
          <button class="reset-btn">Finalizar</button>
        </div>
      </div>
      
      <!-- Consejo para Participación 1 (90 seg, sin input) -->
      <div class="section consejo" data-block-index="2" data-section-index="1" data-allocated="90">
        <div class="section-header">
          <label class="section-title" style="font-weight:bold;">Consejo (90 seg):</label>
          <label>Inicio:</label>
          <input type="text" class="start-time" readonly>
          <label>Fin:</label>
          <input type="text" class="end-time" readonly>
        </div>
        <div class="timer-display" id="timer-block-2-1">
          00:00 (<span class="time-diff">00:00</span>)
        </div>
        <div class="section-controls">
          <button class="start-btn">Iniciar</button>
          <button class="pause-btn">Pausar</button>
          <button class="reset-btn">Finalizar</button>
        </div>
      </div>
      
      <!-- Participación 2 -->
      <div class="section" data-block-index="2" data-section-index="2" data-allocated="240">
        <div class="section-header">
          <input type="text" class="section-title" placeholder="Asignación 2">
          <label>Tiempo (seg):</label>
          <input type="number" class="allocated-input" value="240">
          <label>Responsable:</label>
          <input type="text" class="responsible-input" placeholder="¿Estudiantes?">
          <label>Inicio:</label>
          <input type="text" class="start-time" readonly>
          <label>Fin:</label>
          <input type="text" class="end-time" readonly>
        </div>
        <div class="timer-display" id="timer-block-2-2">
          00:00 (<span class="time-diff">00:00</span>)
        </div>
        <div class="section-controls">
          <button class="start-btn">Iniciar</button>
          <button class="pause-btn">Pausar</button>
          <button class="reset-btn">Finalizar</button>
        </div>
      </div>
      
      <!-- Consejo para Participación 2 (90 seg, sin input) -->
      <div class="section consejo" data-block-index="2" data-section-index="3" data-allocated="90">
        <div class="section-header">
          <label class="section-title" style="font-weight:bold;">Consejo (90 seg):</label>
          <label>Inicio:</label>
          <input type="text" class="start-time" readonly>
          <label>Fin:</label>
          <input type="text" class="end-time" readonly>
        </div>
        <div class="timer-display" id="timer-block-2-3">
          00:00 (<span class="time-diff">00:00</span>)
        </div>
        <div class="section-controls">
          <button class="start-btn">Iniciar</button>
          <button class="pause-btn">Pausar</button>
          <button class="reset-btn">Finalizar</button>
        </div>
      </div>
      
      <!-- Participación 3 -->
      <div class="section" data-block-index="2" data-section-index="4" data-allocated="300">
        <div class="section-header">
          <input type="text" class="section-title" placeholder="Asignación 3 Discurso o estudio">
          <label>Tiempo (seg):</label>
          <input type="number" class="allocated-input" value="300">
          <label>Responsable:</label>
          <input type="text" class="responsible-input" placeholder="¿Estudiante?">
          <label>Inicio:</label>
          <input type="text" class="start-time" readonly>
          <label>Fin:</label>
          <input type="text" class="end-time" readonly>
        </div>
        <div class="timer-display" id="timer-block-2-4">
          00:00 (<span class="time-diff">00:00</span>)
        </div>
        <div class="section-controls">
          <button class="start-btn">Iniciar</button>
          <button class="pause-btn">Pausar</button>
          <button class="reset-btn">Finalizar</button>
        </div>
      </div>
      
      <!-- Consejo para Participación 3 (90 seg, sin input) -->
      <div class="section consejo" data-block-index="2" data-section-index="5" data-allocated="90">
        <div class="section-header">
          <label class="section-title" style="font-weight:bold;">Consejo (90 seg):</label>
          <label>Inicio:</label>
          <input type="text" class="start-time" readonly>
          <label>Fin:</label>
          <input type="text" class="end-time" readonly>
        </div>
        <div class="timer-display" id="timer-block-2-5">
          00:00 (<span class="time-diff">00:00</span>)
        </div>
        <div class="section-controls">
          <button class="start-btn">Iniciar</button>
          <button class="pause-btn">Pausar</button>
          <button class="reset-btn">Finalizar</button>
        </div>
      </div>
    </section>

    <!-- Bloque 2a: Canción (3 min = 180 seg) -->
    <section id="block-2a">
      <h2>Canción (3 min)</h2>
      <div class="block-time-info">
        <div class="section no-times" data-block-index="2a" data-section-index="0" data-allocated="180">
          <div class="section-header">
            <input type="text" class="section-title" placeholder="Canción">
            <label>Tiempo: 180 seg</label>
            <label>Responsable:</label>
            <input type="text" class="responsible-input" placeholder="Nombre">
            <label>Inicio:</label>
            <input type="text" class="start-time" readonly>
            <label>Fin:</label>
            <input type="text" class="end-time" readonly>
          </div>
          <div class="timer-display" id="timer-block-2a-0">
            00:00 (<span class="time-diff">00:00</span>)
          </div>
          <div class="section-controls">
            <button class="start-btn">Iniciar</button>
            <button class="pause-btn">Pausar</button>
            <button class="reset-btn">Finalizar</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Bloque 3: Nuestra vida Cristiana (15 min) -->
    <section id="block-3">
      <h2>Nuestra vida Cristiana (15 min)</h2>
      
      <!-- Sección 0: Primera parte (15 min = 900 seg) -->
      <div class="section" data-block-index="3" data-section-index="0" data-allocated="900">
        <div class="section-header">
          <input type="text" class="section-title" placeholder="Título primera parte">
          <label>Tiempo (seg):</label>
          <input type="number" class="allocated-input" value="900">
          <label>Responsable:</label>
          <input type="text" class="responsible-input" placeholder="Nombre">
          <label>Inicio:</label>
          <input type="text" class="start-time" readonly>
          <label>Fin:</label>
          <input type="text" class="end-time" readonly>
        </div>
        <div class="timer-display" id="timer-block-3-0">
          00:00 (<span class="time-diff">00:00</span>)
        </div>
        <div class="section-controls">
          <button class="start-btn">Iniciar</button>
          <button class="pause-btn">Pausar</button>
          <button class="reset-btn">Finalizar</button>
        </div>
      </div>
      
      <!-- Sección 1: Segunda parte (con "0" asignado) -->
      <div class="section" data-block-index="3" data-section-index="1" data-allocated="0">
        <div class="section-header">
          <input type="text" class="section-title" placeholder="Título segunda parte">
          <label>Tiempo (seg):</label>
          <input type="number" class="allocated-input" value="0">
          <label>Responsable:</label>
          <input type="text" class="responsible-input" placeholder="Nombre">
          <label>Inicio:</label>
          <input type="text" class="start-time" readonly>
          <label>Fin:</label>
          <input type="text" class="end-time" readonly>
        </div>
        <div class="timer-display" id="timer-block-3-1">
          00:00 (<span class="time-diff">00:00</span>)
        </div>
        <div class="section-controls">
          <button class="start-btn">Iniciar</button>
          <button class="pause-btn">Pausar</button>
          <button class="reset-btn">Finalizar</button>
        </div>
      </div>
      
      <!-- Sección 2: Estudio Bíblico de congregación (30 min = 1800 seg) -->
      <h2>Estudio bíblico de congregación (30 min)</h2>
      <div class="section" data-block-index="3" data-section-index="2" data-allocated="1800">
        <div class="section-header">
          <input type="text" class="section-title" placeholder="Libro y lección">
          <label>Tiempo (seg):</label>
          <input type="number" class="allocated-input" value="1800">
          <label>Responsable:</label>
          <input type="text" class="responsible-input" placeholder="Nombre">
          <label>Inicio:</label>
          <input type="text" class="start-time" readonly>
          <label>Fin:</label>
          <input type="text" class="end-time" readonly>
        </div>
        <div class="timer-display" id="timer-block-3-2">
          00:00 (<span class="time-diff">00:00</span>)
        </div>
        <div class="section-controls">
          <button class="start-btn">Iniciar</button>
          <button class="pause-btn">Pausar</button>
          <button class="reset-btn">Finalizar</button>
        </div>
      </div>
    </section>

    <!-- Bloque 4: Resumen y Anuncios (3 min) -->
    <section id="block-4">
      <h2>Resumen y Anuncios (3 min)</h2>
      <div class="block-time-info">
        <div class="section" data-block-index="4" data-section-index="0" data-allocated="180">
          <div class="section-header">
            <input type="text" class="section-title" placeholder="Resumen y Anuncios">
            <label>Tiempo (seg):</label>
            <input type="number" class="allocated-input" value="180">
            <label>Inicio:</label>
            <input type="text" class="start-time" readonly>
            <label>Fin:</label>
            <input type="text" class="end-time" readonly>
          </div>
          <div class="timer-display" id="timer-block-4-0">
            00:00 (<span class="time-diff">00:00</span>)
          </div>
          <div class="section-controls">
            <button class="start-btn">Iniciar</button>
            <button class="pause-btn">Pausar</button>
            <button class="reset-btn">Finalizar</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Bloque 5: Conclusión (5 min) -->
    <section id="block-5">
      <h2>Conclusión (5 min)</h2>
      <div class="block-time-info">
        <div class="section" data-block-index="5" data-section-index="0" data-allocated="300">
          <div class="section-header">
            <input type="text" class="section-title" placeholder="Canción y Oración a cargo de:">
            <label>Tiempo (seg):</label>
            <input type="number" class="allocated-input" value="300">
            <label>Inicio:</label>
            <input type="text" class="start-time" readonly>
            <label>Fin:</label>
            <input type="text" class="end-time" readonly>
          </div>
          <div class="timer-display" id="timer-block-5-0">
            00:00 (<span class="time-diff">00:00</span>)
          </div>
          <div class="section-controls">
            <button class="start-btn">Iniciar</button>
            <button class="pause-btn">Pausar</button>
            <button class="reset-btn">Finalizar</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Bloque: Botón para generar el reporte PDF -->
    <div class="report">
      <button id="generate-pdf">Generar Reporte en PDF</button>
    </div>
  </div>

  <!-- Bloque: Reloj flotante (opcional) -->
  <div id="floating-clock"></div>
  
  <!-- Script para PDF y manejo de comentarios -->
  <script>
    // Generar PDF con los comentarios registrados
    document.getElementById('generate-pdf').addEventListener('click', function() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      let yPosition = 10;
      
      // Título del reporte
      doc.setFontSize(16);
      doc.text("Reporte de Comentarios", 10, yPosition);
      yPosition += 10;
      
      // Obtener comentarios de la lista
      const commentListItems = document.querySelectorAll('.comment-list li');
      if(commentListItems.length === 0) {
        doc.setFontSize(12);
        doc.text("No hay comentarios registrados.", 10, yPosition);
      } else {
        commentListItems.forEach((item, index) => {
          doc.setFontSize(12);
          doc.text((index + 1) + ". " + item.textContent, 10, yPosition);
          yPosition += 10;
          // Agregar una nueva página si es necesario
          if(yPosition > 280) {
            doc.addPage();
            yPosition = 10;
          }
        });
      }
      
      doc.save("reporte_comentarios.pdf");
    });

    // Agregar comentarios a la lista al finalizar cada comentario
    document.querySelectorAll('.comment-end').forEach(button => {
      button.addEventListener('click', function() {
        const container = this.closest('.comment-container');
        const input = container.querySelector('.comment-name');
        const commentText = input.value.trim();
        if(commentText !== "") {
          const li = document.createElement('li');
          li.textContent = commentText;
          container.querySelector('.comment-list').appendChild(li);
          // Actualizar contador
          const countElem = container.querySelector('.comment-count');
          countElem.textContent = container.querySelectorAll('.comment-list li').length;
          // Limpiar el campo
          input.value = "";
        }
      });
    });
  </script>
  
  <script src="script.js"></script>
</body>
</html>
